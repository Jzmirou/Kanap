{
  "version": 3,
  "sources": ["../js/functions/api.js", "../js/functions/dom.js", "../js/components/Loading.js", "../js/components/HomeProducts.js", "../js/home.js"],
  "sourcesContent": ["const api_url = \"http://localhost:3000/api\"\n\n/**\n * @typedef {Object} ProductData\n * @property {string[]} color\n * @property {string} id\n * @property {string} color\n * @property {string} name\n * @property {number} price\n * @property {string} image_url\n * @property {string} description\n * @property {string} image_alt_text\n */\n\n/**\n * @typedef {Object} Contact\n * @property {string} firstName\n * @property {string} lastName\n * @property {string} address\n * @property {number} city\n * @property {string} email\n */\n\n/**\n * Permet de r\u00E9cup\u00E9rer des donn\u00E9es en JSON sur une API \n * @param {string} url \n * @param {Object} options \n * @return {Promise<Object>}\n */\nconst fetchJSON = async (url, options = {}) => {\n    const response = await fetch(`${api_url}${url}`, {\n        ...options,\n        headers: {\n            Accept: \"application/json\",\n            ...options.headers,\n        },\n    });\n    if (!response.ok) {\n        throw new Error(\n            `Pas de r\u00E9ponse du serveur ! status: ${response.status}`,\n            { cause: response }\n        );\n    }\n    const data = await response.json();\n    return data;\n};\n\n\n/**\n * Permet de r\u00E9cup\u00E9rer les donn\u00E9es de tous les produits\n * @returns {Promise<ProductData[]>}\n */\nexport const fetchAllProduct = async () => {\n    const response = await fetchJSON(`/products`, {\n        method: 'GET'\n    });\n    return response\n}\n\n\n/**\n * Permet de r\u00E9cup\u00E9rer les donn\u00E9es d'un produit en particulier\n * @param {string} id \n * @returns {Promise<ProductData>}\n */\nexport const fetchProduct = async (id) => {\n    const response = await fetchJSON(`/products/${id}`, {\n        method: 'GET'\n    });\n    return response\n}\n\n\n/**\n * Permet de r\u00E9cup\u00E9rer les donn\u00E9es de plusieurs produits en particulier\n * @param {Array<string>} ids \n * @returns {Promise<ProductData[]>}\n */\nexport const fetchMultipleProduct = async (ids) => {\n    const request = []\n    for (const id of ids) {\n        request.push(fetchProduct(id))\n    }\n    const response = await Promise.all(request)\n    return response\n}\n\n/**\n * Permet d'envoyer la confirmation de commande \u00E0 l'API\n * @param {Contact} contact \n * @param {Array<string>} products \n * @returns {Promise<{contact : Contact, products : ProductData, orderId: string}>}\n */\nexport const fetchOrder = async (contact, products) => {\n    const body = JSON.stringify({\n        contact: contact,\n        products : products\n    })\n    const response = await fetchJSON(`/products/order`, {\n        method: 'POST',\n        headers: {\n            \"Accept\": \"application/json\",\n            \"Content-Type\": \"application/json\"\n        },\n        body: body\n    })\n    return response\n}", "/**\n * Permet de cr\u00E9er des \u00E9l\u00E9ment HTML avec des attributs plus facilement\n * \n * @param {string} tagName\n * @param {Object} attributes\n * @return {HTMLElement}\n */\nexport const createElement = (tagName, attributes = {}) => {\n    const element = document.createElement(tagName)\n    for (const [attribute, value] of Object.entries(attributes)) {\n        element.setAttribute(attribute, value)\n    }\n    return element\n}", "import { createElement } from \"../functions/dom.js\";\n\nexport class Loading {\n    /**\n     * @type {HTMLElement}\n     */\n    #element;\n    constructor() {\n        const loading = createElement(\"p\");\n        loading.style.fontSize = \"1.5rem\";\n        loading.style.fontWeight = \"bold\";\n        loading.innerText = \"LOADING ...\";\n        this.#element = loading\n    }\n    get element () {\n        return this.#element\n    }\n}\n", "import { fetchAllProduct } from \"../functions/api.js\";\nimport { createElement } from \"../functions/dom.js\";\nimport { Loading } from \"./Loading.js\";\n\nexport class HomeProducts {\n    /**\n     * @type {HTMLElement}\n     */\n    #element;\n    \n    /**\n     * @type {import(\"../functions/api.js\").ProductData}\n     */\n    #products\n\n    /**\n     * @param {HTMLElement} element \n     * @param {import(\"../functions/api.js\").ProductData[]} products \n     */\n    constructor(element, products) {\n        this.#element = element   \n        this.#products = products\n        for (const product of this.#products) {\n            const card = new CardProduct(product);\n            this.#element.append(card.element);\n        }\n    }\n\n    /**\n     * @param {HTMLElement} element \n     * @returns {Promise<Object>}\n     */\n    static initialize = async (element) => {\n        try {\n            /**\n             * @type {HTMLElement}\n             */\n            const loading = new Loading().element\n            element.append(loading)\n            const products = await fetchAllProduct();\n            loading.remove()\n            return new HomeProducts(element, products);\n\n        } catch (error) {\n            console.error(error);\n            const message = createElement(\"p\");\n            message.style.fontSize = '1.5rem'\n            message.innerText = \"Aucun produit trouv\u00E9\";\n            element.append(message);\n        }\n    };\n}\n\nclass CardProduct {\n    /**\n     * @type {HTMLElement}\n     */\n    #element;\n    constructor(product) {\n        const a = createElement(\"a\", {\n            href: `./product.html?id=${product._id}`,\n        });\n        const article = createElement(\"article\");\n        const img = createElement(\"img\", {\n            src: `${product.imageUrl}`,\n            alt: `${product.altTxt}`,\n        });\n        const h3 = createElement(\"h3\", {\n            class: \"productName\",\n        });\n        h3.innerText = product.name;\n        const p = createElement(\"p\", {\n            class: \"productDescription\",\n        });\n        p.innerText = product.description;\n        a.append(article);\n        article.append(img);\n        article.append(h3);\n        article.append(p);\n        this.#element = a;\n    }\n\n    get element() {\n        return this.#element;\n    }\n}\n", "import { HomeProducts } from \"./components/HomeProducts.js\";\n\nconst element = document.querySelector(\"#items\");\n\nconst display = async () => {\n    try {\n        const basket = await HomeProducts.initialize(element)\n    } catch (error) {\n        console.error(error)\n    }\n};\ndisplay();\n"],
  "mappings": "6fAAA,IAAMA,EAAU,4BA6BVC,EAAY,MAAOC,EAAKC,EAAU,CAAC,IAAM,CAC3C,IAAMC,EAAW,MAAM,MAAM,GAAGJ,IAAUE,IAAO,CAC7C,GAAGC,EACH,QAAS,CACL,OAAQ,mBACR,GAAGA,EAAQ,OACf,CACJ,CAAC,EACD,GAAI,CAACC,EAAS,GACV,MAAM,IAAI,MACN,0CAAuCA,EAAS,SAChD,CAAE,MAAOA,CAAS,CACtB,EAGJ,OADa,MAAMA,EAAS,KAAK,CAErC,EAOaC,EAAkB,SACV,MAAMJ,EAAU,YAAa,CAC1C,OAAQ,KACZ,CAAC,EChDE,IAAMK,EAAgB,CAACC,EAASC,EAAa,CAAC,IAAM,CACvD,IAAMC,EAAU,SAAS,cAAcF,CAAO,EAC9C,OAAW,CAACG,EAAWC,CAAK,IAAK,OAAO,QAAQH,CAAU,EACtDC,EAAQ,aAAaC,EAAWC,CAAK,EAEzC,OAAOF,CACX,ECXO,IAAMG,EAAN,KAAc,CAIjBC,GACA,aAAc,CACV,IAAMC,EAAUC,EAAc,GAAG,EACjCD,EAAQ,MAAM,SAAW,SACzBA,EAAQ,MAAM,WAAa,OAC3BA,EAAQ,UAAY,cACpB,KAAKD,GAAWC,CACpB,CACA,IAAI,SAAW,CACX,OAAO,KAAKD,EAChB,CACJ,ECjBA,IAAAG,EAAAC,EAIaC,EAAN,KAAmB,CAetB,YAAYC,EAASC,EAAU,CAX/BC,EAAA,KAAAL,EAAA,QAKAK,EAAA,KAAAJ,EAAA,QAOIK,EAAA,KAAKN,EAAWG,GAChBG,EAAA,KAAKL,EAAYG,GACjB,QAAWG,KAAWC,EAAA,KAAKP,GAAW,CAClC,IAAMQ,EAAO,IAAIC,EAAYH,CAAO,EACpCC,EAAA,KAAKR,GAAS,OAAOS,EAAK,OAAO,EAEzC,CAyBJ,EA/CaE,EAANT,EAIHF,EAAA,YAKAC,EAAA,YAmBAW,EA5BSD,EA4BF,aAAa,MAAOR,GAAY,CACnC,GAAI,CAIA,IAAMU,EAAU,IAAIC,EAAQ,EAAE,QAC9BX,EAAQ,OAAOU,CAAO,EACtB,IAAMT,EAAW,MAAMW,EAAgB,EACvC,OAAAF,EAAQ,OAAO,EACR,IAAIX,EAAaC,EAASC,CAAQ,CAE7C,OAASY,EAAP,CACE,QAAQ,MAAMA,CAAK,EACnB,IAAMC,EAAUC,EAAc,GAAG,EACjCD,EAAQ,MAAM,SAAW,SACzBA,EAAQ,UAAY,0BACpBd,EAAQ,OAAOc,CAAO,CAC1B,CACJ,GAGJ,IAAMP,EAAN,KAAkB,CAIdS,GACA,YAAYZ,EAAS,CACjB,IAAMa,EAAIF,EAAc,IAAK,CACzB,KAAM,qBAAqBX,EAAQ,KACvC,CAAC,EACKc,EAAUH,EAAc,SAAS,EACjCI,EAAMJ,EAAc,MAAO,CAC7B,IAAK,GAAGX,EAAQ,WAChB,IAAK,GAAGA,EAAQ,QACpB,CAAC,EACKgB,EAAKL,EAAc,KAAM,CAC3B,MAAO,aACX,CAAC,EACDK,EAAG,UAAYhB,EAAQ,KACvB,IAAMiB,EAAIN,EAAc,IAAK,CACzB,MAAO,oBACX,CAAC,EACDM,EAAE,UAAYjB,EAAQ,YACtBa,EAAE,OAAOC,CAAO,EAChBA,EAAQ,OAAOC,CAAG,EAClBD,EAAQ,OAAOE,CAAE,EACjBF,EAAQ,OAAOG,CAAC,EAChB,KAAKL,GAAWC,CACpB,CAEA,IAAI,SAAU,CACV,OAAO,KAAKD,EAChB,CACJ,ECnFA,IAAMM,EAAU,SAAS,cAAc,QAAQ,EAEzCC,EAAU,SAAY,CACxB,GAAI,CACA,IAAMC,EAAS,MAAMC,EAAa,WAAWH,CAAO,CACxD,OAASI,EAAP,CACE,QAAQ,MAAMA,CAAK,CACvB,CACJ,EACAH,EAAQ",
  "names": ["api_url", "fetchJSON", "url", "options", "response", "fetchAllProduct", "createElement", "tagName", "attributes", "element", "attribute", "value", "Loading", "#element", "loading", "createElement", "_element", "_products", "_HomeProducts", "element", "products", "__privateAdd", "__privateSet", "product", "__privateGet", "card", "CardProduct", "HomeProducts", "__publicField", "loading", "Loading", "fetchAllProduct", "error", "message", "createElement", "#element", "a", "article", "img", "h3", "p", "element", "display", "basket", "HomeProducts", "error"]
}
